{"path":"sem5/OS/pdf/Module-6_File System Interface - 1_210b67f0.pdf","text":"Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Chapter 10: File-System Interface 10.2 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File System  The file system consists of two distinct parts: a collection of files, each storing related data, and a directory structure, which organizes and provides information about all the files in the system.  A file is a named collection of related information that is recorded on secondary storage.  From a user's perspective, a file is the smallest allotment of logical secondary storage; that is, data cannot be written to secondary storage unless they are within a file.  Commonly, files represent programs (both source and object forms) and data. 10.3 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Concept  Contiguous logical address space  Types:  Data  numeric  character  binary  Program  In general, a file is a sequence of bits, bytes, lines, or records, the meaning of which is defined by the file's creator and user 10.4 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition  The information in a file is defined by its creator. Many different types of information may be stored in a file-source programs, object programs, executable programs, numeric data, text, payroll records, graphic images, sound recordings, and so on.  A text file is a sequence of characters organized into lines (and possibly pages).  A source file is a sequence of subroutines and functions, each of which is further organized as declarations followed by executable statements.  An object file is a sequence of bytes organized in.to blocks understandable by the system's linker.  An executable file is a series of code sections that the loader can bring into memory and execute. 10.5 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Structure  None - sequence of words, bytes  Simple record structure  Lines  Fixed length  Variable length  Complex Structures  Formatted document  Relocatable load file  Can simulate last two with first method by inserting appropriate control characters  Who decides:  Operating system  Program 10.6 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Attributes  Name – only information kept in human-readable form  Identifier – unique tag (number) identifies file within file system  Type – needed for systems that support different types  Location – pointer to file location on device  Size – current file size  Protection – controls who can do reading, writing, executing  Time, date, and user identification – data for protection, security, and usage monitoring  Information about files are kept in the directory structure, which is maintained on the disk 10.7 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Operations  File is an abstract data type  Create  Write  Read  Reposition within file  Delete  Truncate  Open(Fi) – search the directory structure on disk for entry Fi, and move the content of entry to memory  Close (Fi) – move the content of entry Fi in memory to directory structure on disk 10.8 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition  Create --- Two steps are necessary to create a file. First, space in the file system must be found for the file. Second, an entry for the new file must be made in the directory.  Write --- we make a system call specifying both the name of the file and the information to be written to the file. Given the name of the file, the system searches the directory to find the file's location. The system must keep a write pointer to the location in the file where the next write is to take place. The write pointer must be updated whenever a write occurs.  Read ---we use a system call that specifies the name of the file and where (in memory) the next block of the file should be put. Again, the directory is searched for the associated entry, and the system needs to keep a read pointer to the location in the file where the next read is to take place. Once the read has taken place, the read pointer is updated. 10.9 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition  Reposition within file --- The directory is searched for the appropriate entry, and the current-file-position pointer is repositioned to a given value.  Deleting a file ---- We search the directory for the named file. Having found the associated directory entry, we release all file space, so that it can be reused by other files, and erase the directory entry.  Truncating a file --- The user may want to erase the contents of a file but keep its attributes. 10.10 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Open Files Several pieces of data are needed to manage open files:  File pointer: pointer to last read/write location  File-open count: counter of number of times a file is open  Disk location of the file: cache of data access information. The information needed to locate the file on disk is kept in memory so that the system does not have to read it from disk for each operation.  Access rights: per-process access mode information. This information is stored on the per-process table so the operating system can allow or deny subsequent I/0 requests.  File locks allow one process to lock a file and prevent other processes from gaining access to it. File locks are useful for files that are shared by several processes. 10.11 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Open File Locking  Provided by some operating systems and file systems  Mediates access to a file  Mandatory or advisory:  Mandatory – access is denied depending on locks held and requested. If a lock is mandatory, then once a process acquires an exclusive lock, the operating system will prevent any other process from accessing the locked file.  Advisory – processes can find status of locks and decide what to do. if the lock is advisory, then the operating system will not prevent any other process from accessing the locked file. 10.12 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Types – Name, Extension 10.13 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Access Methods  Sequential Access: Information in the file is processed in order, one record after the other read next write next reset no read after last write (rewrite)  A read operation-read next- reads the next portion of the file and automatically advances a file pointer, which tracks the I/O location.  The write operation-write next-appends to the end of the file and advances to the end of the newly written material (the new end of file).  Direct Access : A file is made up of fixed length of logical records that allow programs to read and write records rapidly in no particular order. The direct-access method is based on a disk model of a file, since disks allow random access to any file block. read n write n position to n read next write next rewrite n n = relative block number 10.14 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Sequential-access File 10.15 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Simulation of Sequential Access on Direct-access File 10.16 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Example of Index and Relative Files 10.17 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Directory Structure  A collection of nodes containing information about all files F 1 F 2 F 3 F 4 F n Director y Files Both the directory structure and the files reside on disk Backups of these two structures are kept on tapes 10.18 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Disk Structure  Disk can be subdivided into partitions  Disks or partitions can be RAID protected against failure  Disk or partition can be used raw – without a file system, or formatted with a file system  Partitions also known as minidisks, slices  Entity containing file system known as a volume  Each volume containing file system also tracks that file system’s info in device directory or volume table of contents  As well as general-purpose file systems there are many special- purpose file systems, frequently all within the same operating system or computer 10.19 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition A Typical File-system Organization 10.20 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Operations Performed on Directory  Search for a file  Create a file  Delete a file  List a directory  Rename a file  Traverse the file system 10.21 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Organize the Directory (Logically) to Obtain  Efficiency – locating a file quickly  Naming – convenient to users  Two users can have same name for different files  The same file can have several different names  Grouping – logical grouping of files by properties, (e.g., all Java programs, all games, …) 10.22 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Single-Level Directory  A single directory for all users Nam ing problem Grouping problem 10.23 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Two-Level Directory  Separate directory for each user  Path nam e  Can have the sam e file nam e for diff erent user  Efficient searching  No grouping capability 10.24 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Tree-Structured Directories 10.25 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Tree-Structured Directories (Cont.)  Efficient searching  Grouping Capability  Current directory (working directory)  cd /spell/mail/prog  type list 10.26 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Tree-Structured Directories (Cont)  Absolute or relative path name  Creating a new file is done in current directory  Delete a file rm <file-name>  Creating a new subdirectory is done in current directory mkdir <dir-name> Example: if in current directory /mail mkdir count mail prog copy prt exp count Deleting “m ail”  deleting the entire subtree rooted by “m ail” 10.27 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File System Mounting  A file system must be mounted before it can be accessed  A unmounted file system (i.e., Fig. 11-11(b)) is mounted at a mount point 10.28 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition (a) Existing (b) Unmounted Partition 10.29 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Mount Point 10.30 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Sharing  Sharing of files on multi-user systems is desirable  Sharing may be done through a protection scheme  On distributed systems, files may be shared across a network  Network File System (NFS) is a common distributed file-sharing method 10.31 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Sharing – Multiple Users  User IDs identify users, allowing permissions and protections to be per-user  Group IDs allow users to be in groups, permitting group access rights 10.32 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Sharing – Remote File Systems  Uses networking to allow file system access between systems  Manually via programs like FTP  Automatically, seamlessly using distributed file systems  Semi automatically via the world wide web  Client-server model allows clients to mount remote file systems from servers  Server can serve multiple clients  Client and user-on-client identification is insecure or complicated  NFS is standard UNIX client-server file sharing protocol  CIFS is standard Windows protocol  Standard operating system file calls are translated into remote calls  Distributed Information Systems (distributed naming services) such as LDAP, DNS, NIS, Active Directory implement unified access to information needed for remote computing 10.33 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Sharing – Failure Modes  Remote file systems add new failure modes, due to network failure, server failure  Recovery from failure can involve state information about status of each remote request  Stateless protocols such as NFS include all information in each request, allowing easy recovery but less security 10.34 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition File Sharing – Consistency Semantics  Consistency semantics specify how multiple users are to access a shared file simultaneously  Similar to Ch 7 process synchronization algorithms  Tend to be less complex due to disk I/O and network latency (for remote file systems  Andrew File System (AFS) implemented complex remote file sharing semantics  Unix file system (UFS) implements:  Writes to an open file visible immediately to other users of the same open file  Sharing file pointer to allow multiple users to read and write concurrently  AFS has session semantics  Writes only visible to sessions starting after the file is closed 10.35 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Protection  File owner/creator should be able to control:  what can be done  by whom  Types of access  Read  Write  Execute  Append  Delete  List 10.36 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Access Lists and Groups  Mode of access: read, write, execute  Three classes of users RWX a) owner access 7  1 1 1 RWX b) group access 6  1 1 0 RWX c) public access 1  0 0 1  Ask manager to create a group (unique name), say G, and add some users to the group.  For a particular file (say game) or subdirectory, define an appropriate access. owne r grou p publi c chmo d 76 1 gam e Attach a group to a file chgrp G game 10.37 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition Windows XP Access-Control List Management 10.38 Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition A Sample UNIX Directory Listing Silberschatz, Galvin and Gagne ©2009Operating System Concepts – 8th Edition End of Chapter 10","libVersion":"0.5.0","langs":""}